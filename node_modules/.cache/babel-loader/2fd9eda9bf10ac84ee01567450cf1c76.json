{"ast":null,"code":"/**\n * ag-grid-community - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v21.1.0\n * @link http://www.ag-grid.com/\n * @license MIT\n */\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar componentAnnotations_1 = require(\"../../../widgets/componentAnnotations\");\n\nvar utils_1 = require(\"../../../utils\");\n\nvar simpleFilter_1 = require(\"../simpleFilter\");\n\nvar TextFilter =\n/** @class */\nfunction (_super) {\n  __extends(TextFilter, _super);\n\n  function TextFilter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TextFilter.prototype.getDefaultDebounceMs = function () {\n    return 500;\n  };\n\n  TextFilter.prototype.getValue = function (element) {\n    var val = element.value;\n    val = utils_1._.makeNull(val);\n\n    if (val && val.trim() === '') {\n      val = null;\n    }\n\n    return val;\n  };\n\n  TextFilter.prototype.addValueChangedListeners = function () {\n    var _this = this;\n\n    var listener = function () {\n      return _this.onUiChanged();\n    };\n\n    this.addDestroyableEventListener(this.eValue1, 'input', listener);\n    this.addDestroyableEventListener(this.eValue2, 'input', listener);\n  };\n\n  TextFilter.prototype.setParams = function (params) {\n    _super.prototype.setParams.call(this, params);\n\n    this.textFilterParams = params;\n    this.comparator = this.textFilterParams.textCustomComparator ? this.textFilterParams.textCustomComparator : TextFilter.DEFAULT_COMPARATOR;\n    this.formatter = this.textFilterParams.textFormatter ? this.textFilterParams.textFormatter : this.textFilterParams.caseSensitive == true ? TextFilter.DEFAULT_FORMATTER : TextFilter.DEFAULT_LOWERCASE_FORMATTER;\n    this.addValueChangedListeners();\n  };\n\n  TextFilter.prototype.setConditionIntoUi = function (model, position) {\n    var positionOne = position === simpleFilter_1.ConditionPosition.One;\n    var eValue = positionOne ? this.eValue1 : this.eValue2;\n    eValue.value = model ? model.filter : null;\n  };\n\n  TextFilter.prototype.createCondition = function (position) {\n    var positionOne = position === simpleFilter_1.ConditionPosition.One;\n    var type = positionOne ? this.getCondition1Type() : this.getCondition2Type();\n    var eValue = positionOne ? this.eValue1 : this.eValue2;\n    var value = this.getValue(eValue);\n    var model = {\n      filterType: TextFilter.FILTER_TYPE,\n      type: type\n    };\n\n    if (!this.doesFilterHaveHiddenInput(type)) {\n      model.filter = value;\n    }\n\n    return model;\n  };\n\n  TextFilter.prototype.getFilterType = function () {\n    return TextFilter.FILTER_TYPE;\n  };\n\n  TextFilter.prototype.areSimpleModelsEqual = function (aSimple, bSimple) {\n    return aSimple.filter === bSimple.filter && aSimple.type === bSimple.type;\n  };\n\n  TextFilter.prototype.resetUiToDefaults = function () {\n    _super.prototype.resetUiToDefaults.call(this);\n\n    this.eValue1.value = null;\n    this.eValue2.value = null;\n  };\n\n  TextFilter.prototype.setValueFromFloatingFilter = function (value) {\n    this.eValue1.value = value;\n    this.eValue2.value = null;\n  };\n\n  TextFilter.prototype.getDefaultFilterOptions = function () {\n    return TextFilter.DEFAULT_FILTER_OPTIONS;\n  };\n\n  TextFilter.prototype.createValueTemplate = function (position) {\n    var pos = position === simpleFilter_1.ConditionPosition.One ? '1' : '2';\n    var translate = this.gridOptionsWrapper.getLocaleTextFunc();\n    return \"<div class=\\\"ag-filter-body\\\" ref=\\\"eCondition\" + pos + \"Body\\\">\\n            <div class=\\\"ag-input-wrapper\\\" ref=\\\"eInputWrapper\" + pos + \"\\\">\\n                <input class=\\\"ag-filter-filter\\\" ref=\\\"eValue\" + pos + \"\\\" type=\\\"text\\\" placeholder=\\\"\" + translate('filterOoo', 'Filter...') + \"\\\"/>\\n            </div>\\n        </div>\";\n  };\n\n  TextFilter.prototype.updateUiVisibility = function () {\n    _super.prototype.updateUiVisibility.call(this);\n\n    var showValue1 = this.showValueFrom(this.getCondition1Type());\n\n    utils_1._.setVisible(this.eInputWrapper1, showValue1);\n\n    var showValue2 = this.showValueFrom(this.getCondition2Type());\n\n    utils_1._.setVisible(this.eInputWrapper2, showValue2);\n  };\n\n  TextFilter.prototype.afterGuiAttached = function () {\n    this.eValue1.focus();\n  };\n\n  TextFilter.prototype.isConditionUiComplete = function (position) {\n    var positionOne = position === simpleFilter_1.ConditionPosition.One;\n    var option = positionOne ? this.getCondition1Type() : this.getCondition2Type();\n    var eFilterValue = positionOne ? this.eValue1 : this.eValue2;\n\n    if (option === simpleFilter_1.SimpleFilter.EMPTY) {\n      return false;\n    }\n\n    var value = this.getValue(eFilterValue);\n\n    if (this.doesFilterHaveHiddenInput(option)) {\n      return true;\n    }\n\n    return value != null;\n  };\n\n  TextFilter.prototype.individualConditionPasses = function (params, filterModel) {\n    var filterText = filterModel.filter;\n    var filterOption = filterModel.type;\n    var cellValue = this.textFilterParams.valueGetter(params.node);\n    var cellValueFormatted = this.formatter(cellValue);\n    var customFilterOption = this.optionsFactory.getCustomOption(filterOption);\n\n    if (customFilterOption) {\n      // only execute the custom filter if a value exists or a value isn't required, i.e. input is hidden\n      if (filterText != null || customFilterOption.hideFilterInput) {\n        return customFilterOption.test(filterText, cellValueFormatted);\n      }\n    }\n\n    if (cellValue == null) {\n      return filterOption === simpleFilter_1.SimpleFilter.NOT_EQUAL || filterOption === simpleFilter_1.SimpleFilter.NOT_CONTAINS;\n    }\n\n    var filterTextFormatted = this.formatter(filterText);\n    return this.comparator(filterOption, cellValueFormatted, filterTextFormatted);\n  };\n\n  TextFilter.FILTER_TYPE = 'text';\n  TextFilter.DEFAULT_FILTER_OPTIONS = [simpleFilter_1.SimpleFilter.CONTAINS, simpleFilter_1.SimpleFilter.NOT_CONTAINS, simpleFilter_1.SimpleFilter.EQUALS, simpleFilter_1.SimpleFilter.NOT_EQUAL, simpleFilter_1.SimpleFilter.STARTS_WITH, simpleFilter_1.SimpleFilter.ENDS_WITH];\n\n  TextFilter.DEFAULT_FORMATTER = function (from) {\n    return from;\n  };\n\n  TextFilter.DEFAULT_LOWERCASE_FORMATTER = function (from) {\n    if (from == null) {\n      return null;\n    }\n\n    return from.toString().toLowerCase();\n  };\n\n  TextFilter.DEFAULT_COMPARATOR = function (filter, value, filterText) {\n    switch (filter) {\n      case TextFilter.CONTAINS:\n        return value.indexOf(filterText) >= 0;\n\n      case TextFilter.NOT_CONTAINS:\n        return value.indexOf(filterText) === -1;\n\n      case TextFilter.EQUALS:\n        return value === filterText;\n\n      case TextFilter.NOT_EQUAL:\n        return value != filterText;\n\n      case TextFilter.STARTS_WITH:\n        return value.indexOf(filterText) === 0;\n\n      case TextFilter.ENDS_WITH:\n        var index = value.lastIndexOf(filterText);\n        return index >= 0 && index === value.length - filterText.length;\n\n      default:\n        // should never happen\n        console.warn('invalid filter type ' + filter);\n        return false;\n    }\n  };\n\n  __decorate([componentAnnotations_1.RefSelector('eValue1'), __metadata(\"design:type\", HTMLInputElement)], TextFilter.prototype, \"eValue1\", void 0);\n\n  __decorate([componentAnnotations_1.RefSelector('eValue2'), __metadata(\"design:type\", HTMLInputElement)], TextFilter.prototype, \"eValue2\", void 0);\n\n  __decorate([componentAnnotations_1.RefSelector('eInputWrapper1'), __metadata(\"design:type\", HTMLElement)], TextFilter.prototype, \"eInputWrapper1\", void 0);\n\n  __decorate([componentAnnotations_1.RefSelector('eInputWrapper2'), __metadata(\"design:type\", HTMLElement)], TextFilter.prototype, \"eInputWrapper2\", void 0);\n\n  return TextFilter;\n}(simpleFilter_1.SimpleFilter);\n\nexports.TextFilter = TextFilter;","map":null,"metadata":{},"sourceType":"script"}